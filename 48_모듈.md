# 48 모듈

## 48.1 모듈의 일반적 의미

모듈이란 애플리케이션을 구성하는 개별적 요소로서 **재사용 가능한 코드 조각**을 말한다. 일반적으로 모듈은 기능을 기준으로 하여 파일 단위로 분리하며 모듈은 자신만듸 파일 스코프(모듈 스코프)를 가진다.

모듈의 모든 자산은 **캡슐화**되어 다른 모듈에서 접근할 수 없다. 따라서 모듈은 공개가 필요한 자산에 한정하여 명시적으로 선택적 공개가 가능하며 이를 **export**라 한다.

이렇게 공개된 모듈의 일부 또는 전체를 선택해 자신의 스코프 내로 불러들여 재사용하는 것을 **import**라 한다.

모듈은 이러첢 애플리케이션과 분리되어 개별적으로 존재하다가 필요에 따라 다른 모듈에 의해 재사용된다. 모듈은 기능별로 분리되어 개별적인 파일로 작성된다. 따라서 코드의 단위를 명확히 분리하여 애플리케이션을 구성할 수 있고, 재사용성이 좋아 개발 효율성과 유지 보수성을 높일 수 있다.

<br>

## 48.2 자바스크립트와 모듈

자바스크립트는 웹페이지의 단순한 보조 기능을 처리하기 위한 제한적인 용도를 목적으로 탄생했다. 그렇기 때문에 모듈이 성립하기 위해 필요한 파일 스코프와 import, export를 지원하지 않았다.

이를 해결하기 위해 제안된 것이 CommmonJs와 AMD이며 런타입 환경인 Node.js에서 표준으로 CommonJs를 채택했고 이를 통해 모듈 시스템을 지원한다.

<br>

## 48.3 ES6 모듈(ESM)

이런 상황에서 ES6부터 클라이언트 사이드 자바스크립트에서도 동작하는 모듈 기능이 추가되었다. `script` 태그에 `type="module"` 어트리뷰트를 추가하면 로드된 자바스크립트 파일은 모듈로서 동작하며 기본적으로 strict mode가 적용된다.

<br>

### 48.3.1 모듈 스코프

ESM은 독자적인 모듈 스코프를 갖는다. 일반적인 자바스크립트 파일은 하나의 전역을 공유하며 하나의 파일 내에 있는 것처럼 동작하지만, ESM 내에서 선언한 변수는 전역 변수도 아니고 `window` 객체의 프로퍼티도 아니며 서로 공유하지 않는다.

<br>

### 48.3.2 export 키워드

`export` 키워드를 선언문 앞에 사용하여 변수, 함수, 클래스 등 모든 식별자를 export 할 수 있다. 혹은 export할 대상을 하나의 객체로 구성하여 한 번에 export할 수도 있다.

<br>

### 48.3.3 import 키워드

export한 식별자들을 다른 모듈 스코프로 로드하려면 import 키워드를 사용해 가져오면 된다. 최상위 진입점 파일을 제외하고는 `script` 태그로 로드할 필요가 없고 import문에 의해 로드하는 의존성으로 사용하면 된다.

모듈이 export한 식별자 이름을 일일이 쓰지 않고 식별자 뒤에 `as` + 객체명으로 객체의 프로퍼티로 할당할 수도 있다.

혹은 `as` 키워드로 export한 식별자 이름을 변경하여 import할 수도 있다.

모듈에서 하나의 값만 export할 경우 default 키워드를 사용하여 import할 수도 있는데, 이때 이름 없이 하나의 값만 export하고 가져올 때는 임의의 이름으로 import한다.

<br>
<br>

```
> 출처 : 이웅모, 모던 자바스크립트 Deep Dive, 위키북스
```
